<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Manchot TV - Streaming & Store</title>
    
    <link rel="stylesheet" href="styles/desktop.css" media="screen and (min-width: 768px)">
    <link rel="stylesheet" href="styles/mobile.css" media="screen and (max-width: 767px)">
</head>
<body onload="chargerPanier()">

    <header>
        <div><h1>ManchoTV</h1></div>
    </header>

    <nav class="navbar">
        <ul class="nav-links">
            <li><a href="#" onclick="changerPage('page-accueil')">Accueil</a></li>
            <li><a href="#" onclick="changerPage('page-catalogue')">Catalogue</a></li>
            <li><a href="#" onclick="changerPage('page-profil')">Profil</a></li>
            <li><a href="#" onclick="changerPage('page-panier')">Panier <span id="nav-panier-count" class="badge-count">0</span></a></li>
        </ul>
        <div class="search-container">
            <input type="text" placeholder="Rechercher...">
        </div>
    </nav>

    <main>

        <div id="page-accueil" class="page-section">
            <section class="hero">
                <div class="hero-content">
                    <h2>Ã€ la une : La Marche de l'Empereur</h2>
                    <p>DÃ©couvrez l'incroyable aventure des manchots.</p>
                    <div class="hero-buttons">
                        <a href="#fiche-empereur" class="btn-secondary">â“˜ Plus d'infos</a>
                        <a href="#lecteur-video" class="btn-watch">â–¶ Lecture</a>
                    </div>
                </div>
            </section>

            <section class="filters-section">
                <span class="filter-label">Trier par :</span>
                <select id="select-tri-accueil"><option value="new">NouveautÃ©s</option><option value="pop">Populaires</option></select>
                <button class="btn-filter" onclick="trierAccueil()">Appliquer</button>
            </section>

            <section class="recommendations">
                <h2>RecommandÃ©s pour vous</h2>
                <div class="media-grid" id="grid-accueil">
                    <div class="media-card" data-date="2005" data-pop="98">
                        <a href="#fiche-empereur" class="media-visual-link"><div class="media-visual"><div class="media-placeholder">Img</div><span class="badge-stream">Stream</span></div></a>
                        <div class="media-info">
                            <h3>La Marche de l'Empereur</h3><p class="genre">Docu</p>
                            <div class="card-actions">
                                <a href="#fiche-empereur" class="btn-secondary">â“˜ Infos</a>
                                <button class="btn-add-cart" onclick="ajouterAuPanier('La Marche de l\'Empereur', 9.99, 'DVD')">ðŸ›’ +</button>
                            </div>
                        </div>
                    </div>
                    <div class="media-card" data-date="2014" data-pop="95">
                        <a href="#fiche-interstellar" class="media-visual-link"><div class="media-visual"><div class="media-placeholder">Img</div><span class="badge-stream">Stream</span></div></a>
                        <div class="media-info">
                            <h3>Interstellar</h3><p class="genre">Sci-Fi</p>
                            <div class="card-actions">
                                <a href="#fiche-interstellar" class="btn-secondary">â“˜ Infos</a>
                                <button class="btn-add-cart" onclick="ajouterAuPanier('Interstellar', 15.00, 'Blu-Ray')">ðŸ›’ +</button>
                            </div>
                        </div>
                    </div>
                    <div class="media-card" data-date="2016" data-pop="90">
                        <a href="#fiche-stranger" class="media-visual-link"><div class="media-visual"><div class="media-placeholder">Img</div><span class="badge-stream">Stream</span></div></a>
                        <div class="media-info">
                            <h3>Stranger Things</h3><p class="genre">SÃ©rie</p>
                            <div class="card-actions">
                                <a href="#fiche-stranger" class="btn-secondary">â“˜ Infos</a>
                                <button class="btn-add-cart" onclick="ajouterAuPanier('Stranger Things S1', 20.00, 'DVD')">ðŸ›’ +</button>
                            </div>
                        </div>
                    </div>
                </div>
            </section>
        </div>

        <div id="page-catalogue" class="page-section" style="display: none;">
            <h1 class="page-title">Catalogue Complet</h1>
            <section class="filters-section" style="margin-bottom:40px; background:#eee;">
                <span class="filter-label">Genre :</span>
                <select id="select-genre">
                    <option value="all">Tout</option><option value="action">Action</option><option value="animation">Animation</option><option value="policier">Policier</option><option value="scifi">Sci-Fi</option><option value="serie">SÃ©rie</option>
                </select>
                <button class="btn-filter" onclick="filtrerCatalogue()" style="background:black; color:white;">Filtrer</button>
            </section>
            
            <div class="media-grid" id="catalogue-grid">
                <div class="media-card" data-genre="action">
                    <a href="#fiche-avengers" class="media-visual-link"><div class="media-visual"><div class="media-placeholder">Img</div><span class="badge-stream">Stream</span></div></a>
                    <div class="media-info"><h3>Avengers: Endgame</h3><p class="genre">Action</p><p class="price">25.00â‚¬</p>
                    <div class="card-actions"><a href="#fiche-avengers" class="btn-secondary">â“˜</a><button class="btn-add-cart" onclick="ajouterAuPanier('Avengers: Endgame', 25.00, 'Blu-Ray 4K')">ðŸ›’ +</button></div></div>
                </div>
                <div class="media-card" data-genre="animation">
                    <a href="#fiche-roilion" class="media-visual-link"><div class="media-visual"><div class="media-placeholder">Img</div><span class="badge-stream">Stream</span></div></a>
                    <div class="media-info"><h3>Le Roi Lion</h3><p class="genre">Animation</p><p class="price">15.00â‚¬</p>
                    <div class="card-actions"><a href="#fiche-roilion" class="btn-secondary">â“˜</a><button class="btn-add-cart" onclick="ajouterAuPanier('Le Roi Lion', 15.00, 'DVD')">ðŸ›’ +</button></div></div>
                </div>
                <div class="media-card" data-genre="policier">
                    <a href="#fiche-parrain" class="media-visual-link"><div class="media-visual"><div class="media-placeholder">Img</div></div></a>
                    <div class="media-info"><h3>Coffret Le Parrain</h3><p class="genre">Policier</p><p class="price">35.00â‚¬</p>
                    <div class="card-actions"><a href="#fiche-parrain" class="btn-secondary">â“˜</a><button class="btn-add-cart" onclick="ajouterAuPanier('Coffret Le Parrain', 35.00, 'Coffret')">ðŸ›’ +</button></div></div>
                </div>
                <div class="media-card" data-genre="serie">
                    <a href="#fiche-stranger" class="media-visual-link"><div class="media-visual"><div class="media-placeholder">Img</div><span class="badge-stream">Stream</span></div></a>
                    <div class="media-info"><h3>Stranger Things S1</h3><p class="genre">SÃ©rie</p><p class="price">20.00â‚¬</p>
                    <div class="card-actions"><a href="#fiche-stranger" class="btn-secondary">â“˜</a><button class="btn-add-cart" onclick="ajouterAuPanier('Stranger Things S1', 20.00, 'DVD')">ðŸ›’ +</button></div></div>
                </div>
            </div>

            <div id="suite-catalogue" class="media-grid" style="display:none; margin-top:30px;">
                <div class="media-card" data-genre="scifi">
                    <a href="#fiche-jurassic" class="media-visual-link"><div class="media-visual"><div class="media-placeholder">Img</div><span class="badge-stream">Stream</span></div></a>
                    <div class="media-info"><h3>Jurassic Park</h3><p class="genre">Sci-Fi</p><p class="price">12.00â‚¬</p>
                    <div class="card-actions"><a href="#fiche-jurassic" class="btn-secondary">â“˜</a><button class="btn-add-cart" onclick="ajouterAuPanier('Jurassic Park', 12.00, 'Blu-Ray')">ðŸ›’ +</button></div></div>
                </div>
                <div class="media-card" data-genre="animation">
                    <a href="#fiche-toystory" class="media-visual-link"><div class="media-visual"><div class="media-placeholder">Img</div><span class="badge-stream">Stream</span></div></a>
                    <div class="media-info"><h3>Toy Story 4</h3><p class="genre">Animation</p><p class="price">18.00â‚¬</p>
                    <div class="card-actions"><a href="#fiche-toystory" class="btn-secondary">â“˜</a><button class="btn-add-cart" onclick="ajouterAuPanier('Toy Story 4', 18.00, 'DVD')">ðŸ›’ +</button></div></div>
                </div>
                <div class="media-card" data-genre="action">
                    <a href="#fiche-darkknight" class="media-visual-link"><div class="media-visual"><div class="media-placeholder">Img</div></div></a>
                    <div class="media-info"><h3>The Dark Knight</h3><p class="genre">Action</p><p class="price">22.00â‚¬</p>
                    <div class="card-actions"><a href="#fiche-darkknight" class="btn-secondary">â“˜</a><button class="btn-add-cart" onclick="ajouterAuPanier('The Dark Knight', 22.00, 'Blu-Ray 4K')">ðŸ›’ +</button></div></div>
                </div>
                <div class="media-card" data-genre="serie">
                    <a href="#fiche-breakingbad" class="media-visual-link"><div class="media-visual"><div class="media-placeholder">Img</div></div></a>
                    <div class="media-info"><h3>Breaking Bad</h3><p class="genre">SÃ©rie</p><p class="price">80.00â‚¬</p>
                    <div class="card-actions"><a href="#fiche-breakingbad" class="btn-secondary">â“˜</a><button class="btn-add-cart" onclick="ajouterAuPanier('Breaking Bad', 80.00, 'Coffret')">ðŸ›’ +</button></div></div>
                </div>
            </div>
            <div style="text-align:center; margin-top:30px;"><button id="btn-load-more" class="btn-secondary" onclick="voirLaSuite()">Voir la suite &rarr;</button></div>
        </div>

        <div id="page-profil" class="page-section" style="display: none;">
            <h1 class="page-title">Mon Espace Personnel</h1>
            <div class="profile-container">
                <div class="profile-card">
                    <h2>Mes Infos</h2>
                    <div class="profile-header"><div class="avatar-circle">J</div><div><h3>Jean Dupont</h3><p>CinÃ©phile</p></div></div>
                    <p><strong>Abonnement :</strong> Manchot+ (Actif)</p>
                </div>
            </div>
        </div>

        <div id="page-panier" class="page-section" style="display: none;">
            <h1 class="page-title">Votre panier</h1>
            <div class="cart-container">
                
                <section class="cart-items-section">
                    <div id="cart-list-container">
                        <p style="text-align:center; padding:20px;">Votre panier est vide.</p>
                    </div>
                </section>

                <aside class="cart-summary-section">
                    <div class="summary-box">
                        <h3>Total Commande</h3>
                        <div style="display:flex; justify-content:space-between;">
                            <span>Sous-total :</span> <span id="cart-subtotal">0.00 â‚¬</span>
                        </div>
                        <div style="display:flex; justify-content:space-between;">
                            <span>Livraison :</span> <span>3.00 â‚¬</span>
                        </div>
                        <hr>
                        <div style="display:flex; justify-content:space-between; font-weight:bold; font-size:1.2rem; margin:10px 0;">
                            <span>Total :</span> <span id="cart-total">0.00 â‚¬</span>
                        </div>
                        <button class="btn-validate" onclick="ouvrirPaiement()">Passer au paiement</button>
                    </div>
                </aside>
            </div>
        </div>

    </main>

    <div id="modal-paiement" class="modal-overlay">
        <div class="modal-content" style="max-width:400px;">
            <a href="#" class="close-modal">&times;</a>
            <div class="modal-header" style="background:#111; color:white; height:80px; align-items:center;">
                <h2>Paiement SÃ©curisÃ©</h2>
            </div>
            <div class="modal-body">
                <form onsubmit="event.preventDefault(); validerPaiement();">
                    <label style="font-weight:bold;">NumÃ©ro de carte</label>
                    <input type="text" placeholder="0000 0000 0000 0000" required style="width:100%; padding:10px; margin-bottom:10px;">
                    
                    <div style="display:flex; gap:10px;">
                        <div style="flex:1">
                            <label style="font-weight:bold;">Exp.</label>
                            <input type="text" placeholder="MM/AA" required style="width:100%; padding:10px; margin-bottom:10px;">
                        </div>
                        <div style="flex:1">
                            <label style="font-weight:bold;">CVV</label>
                            <input type="text" placeholder="123" required style="width:100%; padding:10px; margin-bottom:10px;">
                        </div>
                    </div>
                    
                    <label style="font-weight:bold;">Nom du titulaire</label>
                    <input type="text" placeholder="Jean Dupont" required style="width:100%; padding:10px; margin-bottom:20px;">
                    
                    <button type="submit" class="btn-watch" style="width:100%;">Payer maintenant</button>
                </form>
            </div>
        </div>
    </div>

    <div id="fiche-empereur" class="modal-overlay"><div class="modal-content"><a href="#" class="close-modal">&times;</a><div class="modal-header" style="background:#eee;"><h2>La Marche de l'Empereur</h2></div><div class="modal-body"><p>Docu - 2005</p><div class="modal-actions"><a href="#lecteur-video" class="btn-watch">Lecture</a><button class="btn-add-cart" onclick="ajouterAuPanier('La Marche de l\'Empereur', 9.99, 'DVD')">Ajouter DVD</button></div></div></div></div>
    <div id="fiche-interstellar" class="modal-overlay"><div class="modal-content"><a href="#" class="close-modal">&times;</a><div class="modal-header" style="background:#333;color:white"><h2>Interstellar</h2></div><div class="modal-body"><p>Sci-Fi - 2014</p><div class="modal-actions"><a href="#lecteur-video" class="btn-watch">Lecture</a><button class="btn-add-cart" onclick="ajouterAuPanier('Interstellar', 15.00, 'Blu-Ray')">Ajouter Blu-Ray</button></div></div></div></div>
    <div id="lecteur-video" class="video-overlay">
        <div class="video-container">
            <a href="#" class="close-btn">&times; Fermer</a>
            <video controls width="100%"><source src="https://commondatastorage.googleapis.com/gtv-videos-bucket/sample/BigBuckBunny.mp4" type="video/mp4"></video>
        </div>
    </div>

    <footer><p>Â© 2026 Manchot TV</p></footer>

    <script>
        // --- 1. GESTION DU PANIER ---
        
        // On rÃ©cupÃ¨re le panier stockÃ© dans le navigateur, ou on crÃ©e une liste vide
        let monPanier = JSON.parse(localStorage.getItem('panierManchot')) || [];

        // Fonction pour ajouter un article
        function ajouterAuPanier(titre, prix, type) {
            // CrÃ©ation de l'objet article
            const article = {
                titre: titre,
                prix: prix,
                type: type,
                qte: 1
            };

            // Ajout au tableau
            monPanier.push(article);
            
            // Sauvegarde dans le navigateur
            sauvegarderPanier();
            
            // Mise Ã  jour de l'affichage
            afficherPanier();
            
            // Petit message de confirmation
            alert(titre + " a Ã©tÃ© ajoutÃ© au panier !");
        }

        // Fonction pour sauvegarder
        function sauvegarderPanier() {
            localStorage.setItem('panierManchot', JSON.stringify(monPanier));
            updateCompteur();
        }

        // Fonction pour afficher le nombre d'articles dans le menu
        function updateCompteur() {
            document.getElementById('nav-panier-count').textContent = monPanier.length;
        }

        // Fonction pour gÃ©nÃ©rer le HTML du panier
        function afficherPanier() {
            const container = document.getElementById('cart-list-container');
            const subtotalEl = document.getElementById('cart-subtotal');
            const totalEl = document.getElementById('cart-total');

            // Si panier vide
            if (monPanier.length === 0) {
                container.innerHTML = '<p style="text-align:center; padding:20px;">Votre panier est vide.</p>';
                subtotalEl.textContent = "0.00 â‚¬";
                totalEl.textContent = "0.00 â‚¬";
                return;
            }

            // Sinon, on construit la liste
            let html = '';
            let total = 0;

            monPanier.forEach((item, index) => {
                total += item.prix;
                html += `
                    <div class="cart-item">
                        <div class="item-visual" style="width:50%; font-weight:bold;">${item.titre}</div>
                        <span class="item-info">${item.type}</span>
                        <span class="item-price">${item.prix.toFixed(2)} â‚¬</span>
                        <button class="btn-delete" onclick="supprimerArticle(${index})" style="color:red; border:1px solid red; background:white; cursor:pointer;">X</button>
                    </div>
                `;
            });

            container.innerHTML = html;
            
            // Calculs finaux
            subtotalEl.textContent = total.toFixed(2) + " â‚¬";
            const totalAvecLivraison = total + 3.00;
            totalEl.textContent = totalAvecLivraison.toFixed(2) + " â‚¬";
            
            updateCompteur();
        }

        // Fonction pour supprimer un article
        function supprimerArticle(index) {
            monPanier.splice(index, 1); // EnlÃ¨ve 1 Ã©lÃ©ment Ã  l'index donnÃ©
            sauvegarderPanier();
            afficherPanier();
        }

        // Fonction appelÃ©e au chargement de la page (onload dans <body>)
        function chargerPanier() {
            afficherPanier();
            updateCompteur();
        }

        // --- 2. PAIEMENT ---
        function ouvrirPaiement() {
            if(monPanier.length === 0) {
                alert("Votre panier est vide !");
                return;
            }
            // Affiche la fenÃªtre modale de paiement (via CSS target ou modif style)
            // Ici on utilise une petite astuce JS pour changer l'URL sans recharger
            window.location.hash = "modal-paiement";
        }

        function validerPaiement() {
            alert("Paiement acceptÃ© ! Merci pour votre commande.");
            // On vide le panier
            monPanier = [];
            sauvegarderPanier();
            afficherPanier();
            // On ferme la fenÃªtre (retour Ã  une ancre vide)
            window.location.hash = "#";
            // On retourne Ã  l'accueil
            changerPage('page-accueil');
        }

        // --- 3. NAVIGATION & FILTRES (DÃ©jÃ  existants) ---
        function changerPage(id) {
            ['page-accueil', 'page-catalogue', 'page-profil', 'page-panier'].forEach(p => {
                document.getElementById(p).style.display = 'none';
            });
            document.getElementById(id).style.display = 'block';
        }
        function voirLaSuite() { document.getElementById('suite-catalogue').style.display = 'flex'; document.getElementById('btn-load-more').style.display='none'; }
        function filtrerCatalogue() {
            const genre = document.getElementById('select-genre').value;
            document.querySelectorAll('.media-card').forEach(c => {
                if(c.hasAttribute('data-genre')) {
                    c.style.display = (genre === 'all' || c.getAttribute('data-genre') === genre) ? 'block' : 'none';
                    if(c.style.display === 'block') c.parentElement.style.display = 'flex';
                }
            });
            voirLaSuite();
        }
        function trierAccueil() {
            const critere = document.getElementById('select-tri-accueil').value;
            const container = document.getElementById('grid-accueil');
            const cards = Array.from(container.getElementsByClassName('media-card'));
            cards.sort((a, b) => parseInt(b.getAttribute(critere==='new'?'data-date':'data-pop')) - parseInt(a.getAttribute(critere==='new'?'data-date':'data-pop')));
            cards.forEach(c => container.appendChild(c));
        }
    </script>
</body>
</html>