<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Manchot TV - Final</title>
    
    <link rel="stylesheet" href="styles/style.css">
    <link rel="stylesheet" href="styles/cart.css">
</head>
<body onload="chargerPanier()">
    <script src="js/data.js"></script>
    <script src="js/cart.js"></script>

    <header>
        <div class="header-inner">
            <h1>üêß ManchoTV</h1>
        </div>
    </header>

    <nav class="navbar">
        <ul class="nav-links">
            <li><a onclick="changerPage('accueil')">Accueil</a></li>
            <li><a onclick="changerPage('catalogue')">Catalogue</a></li>
            <li><a href="#page-profil">Profil</a></li>
            <li><a href="#page-panier">Panier <span id="nav-panier-count" class="badge-count">0</span></a></li>
        </ul>
        <div class="search-container">
            <input type="text" placeholder="Rechercher...">
        </div>
    </nav>

    <main>

        <div id="page-accueil">
            <div class="hero">
                <div class="hero-content">
                    <p>D√©couvrez l'aventure extraordinaire en Antarctique.</p>
                    <div class="hero-buttons">
                        <a href="#info-17" class="btn-hero btn-white">‚ìò Infos</a>
                        <a href="#lecteur-video" class="btn-hero btn-blue">‚ñ∂ Lecture</a>
                    </div>
                </div>
            </div>

            <h2 class="recommendations-title">Recommand√©s pour vous</h2>
            <div class="media-grid" id="recommendations"></div>
            <script>
                addFullCatalog(films.slice(0, 3), document.getElementById("recommendations"))
            </script>
            
            <div class="recommendations-gocatalog">
                <button onclick="changerPage('catalogue')" class="btn-play">Voir tout le catalogue &rarr;</button>
            </div>
        </div>

        <div id="page-catalogue" style="display:none;">
            <h2 class="page-title" id="catalogue-title"></h2>
            <script>
                document.getElementById("catalogue-title").innerText = `Notre Catalogue Complet (${films.length} Titres)`;
            </script>

            <div class="filters">
                <select class="filter" id="genre-filter" title="genre">
                    <option value="">Filtrer par genre</option>
                </select>
                <script>
                    const genreSelect = document.getElementById("genre-filter");
                    
                    for(const genre of getGenres()) {
                        const option = document.createElement("option")
                        option.innerText = genre;
                        option.nodeValue = genre;
                        genreSelect.appendChild(option)
                    }

                    genreSelect.addEventListener("change", (value) => {
                        const genre = value.target.value;
                        const catalogue = document.getElementById("catalogue");
                        catalogue.innerHTML = '';
                        let filteredFilms = films;
                        if(genre !== "") {
                            filteredFilms = films.filter((v) => v.genres.includes(genre));
                        }
                        addFullCatalog(filteredFilms, catalogue);
                    })
                </script>
            </div>

            <div class="media-grid" id="catalogue"></div>
            <script>
                addFullCatalog(films, document.getElementById("catalogue"))
            </script>
        </div>
    </main>

     <script>
        addFullModal(films, document.getElementsByTagName("body")[0])
    </script>

    <!--        PANIER          -->
    <div id="page-panier" class="modal-overlay">
        <div class="modal-box small-box cart">
            <a href="#" class="close-cross">&times;</a>
            <h2>Votre Panier</h2>
            <div id="cart-list-container">
                <p>Panier vide.</p>
            </div>
            <div class="cart-details-line">
                <span>Sous total : </span>
                <span id="films-cost">-,--‚Ç¨</span>
            </div>
            <hr>
            <div class="cart-details-line">
                <span>Supports : </span>
                <span id="supports-cost">-,--‚Ç¨</span>
            </div>
            <div class="cart-details-line">
                <span>Frais de livraison : </span>
                <span id="shippment-cost">-,--‚Ç¨</span>
            </div>
            <hr>
            <div class="total">Total : <span id="cart-total">0.00 ‚Ç¨</span></div>
            <a href="#modal-paiement" class="proccess-to-payment">Passer au paiement</a>
        </div>
    </div>

    <div id="modal-paiement" class="modal-overlay">
        <div class="modal-box small-box payment">
            <a href="#" class="close-cross">&times;</a>
            <h2>Paiement S√©curis√©</h2>
            <p>Entrez vos coordonn√©es (Simulation)</p>
            <input class="numero" type="text" placeholder="Num√©ro CB">
            <input class="expiration" type="text" placeholder="MM/AA">
            <input class="cvc" type="text" placeholder="CVC">
            <button onclick="validerPaiementJS()" class="btn-play submit">Confirmer et Payer</button>
        </div>
    </div>

    <div id="page-profil" class="modal-overlay">
        <div class="modal-box small-box .profile">
            <a href="#" class="close-cross">&times;</a>
            <h2 class="picture">Mon Profil</h2>
            <div>J</div>
            <h3>Jean Dupont</h3>
            <p>Acc√®s : Visiteur</p>
        </div>
    </div>

    <div id="lecteur-video" class="video-overlay">
        <div class="video-box">
            <a href="#" class="close-video">Fermer ‚úï</a>
            <video controls autoplay width="100%">
                <source src="https://commondatastorage.googleapis.com/gtv-videos-bucket/sample/BigBuckBunny.mp4" type="video/mp4">
            </video>
        </div>
    </div>
</body>
</html>